<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>F-Lambda Transformer</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #0a0a23;
        color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
    }
    input, button, textarea {
        margin: 10px 0;
        padding: 10px;
        border-radius: 6px;
        border: none;
    }
    button {
        background-color: #4f46e5;
        color: white;
        cursor: pointer;
    }
    button:disabled {
        background-color: #777;
        cursor: not-allowed;
    }
    #result {
        margin-top: 20px;
        max-width: 90%;
        word-break: break-word;
    }
</style>
</head>
<body>
<h1>F-Lambda Transformer</h1>

<input type="file" id="fileInput">
<button id="uploadBtn">Upload & Transform</button>
<div id="progress"></div>
<div id="result"></div>

<script>
const uploadBtn = document.getElementById('uploadBtn');
const fileInput = document.getElementById('fileInput');
const resultDiv = document.getElementById('result');
const progressDiv = document.getElementById('progress');

uploadBtn.addEventListener('click', async () => {
    const file = fileInput.files[0];
    if (!file) {
        alert('Please select a file.');
        return;
    }

    const formData = new FormData();
    formData.append('file', file);

    progressDiv.innerText = 'Processing...';

    try {
        const response = await fetch('https://<YOUR_RENDER_BACKEND_URL>/upload', {
            method: 'POST',
            body: formData
        });

        if (!response.ok) throw new Error('Upload failed');

        const data = await response.json();
        progressDiv.innerText = 'Done!';

        resultDiv.innerHTML = `
            <p>Filename: ${data.filename}</p>
            <p>Content type: ${data.content_type}</p>
            <p>Size (bytes): ${data.size_bytes}</p>
            <p>Processing time: ${data.processing_time}</p>
            <p>Signals count: ${data.signals_count}</p>
            <p>Base64 preview (first 200 chars): ${data.recovered_file.slice(0, 200)}</p>
        `;
    } catch (err) {
        progressDiv.innerText = '';
        alert(err.message);
    }
});
</script>
</body>
</html>
